apiVersion: v1
kind: ConfigMap
metadata:
  name: router-service-config
  labels:
    app: router-service
data:
  SPRING_PROFILES_ACTIVE: "kubernetes"
  SERVER_PORT: "8082"
  
  # Redis Configuration
  SPRING_DATA_REDIS_HOST: "redis"
  SPRING_DATA_REDIS_PORT: "6379"
  
  # Kafka Configuration
  SPRING_KAFKA_BOOTSTRAP_SERVERS: "kafka:9092"
  SPRING_KAFKA_CONSUMER_GROUP_ID: "router-service-group-v2"
  SPRING_KAFKA_CONSUMER_AUTO_OFFSET_RESET: "earliest"
  SPRING_KAFKA_CONSUMER_ENABLE_AUTO_COMMIT: "false"
  
  # Service Discovery - Connector URLs
  WHATSAPP_CONNECTOR_URL: "http://whatsapp-connector:8091"
  TELEGRAM_CONNECTOR_URL: "http://telegram-connector:8092"
  INSTAGRAM_CONNECTOR_URL: "http://instagram-connector:8093"
  USER_SERVICE_URL: "http://user-service:8083"
  
  # Retry Configuration
  RESILIENCE4J_RETRY_INSTANCES_CONNECTOR_MAX_ATTEMPTS: "3"
  RESILIENCE4J_RETRY_INSTANCES_CONNECTOR_WAIT_DURATION: "2s"
  
  # Observability
  MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE: "health,info,prometheus,metrics"
  MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED: "true"
  MANAGEMENT_METRICS_DISTRIBUTION_PERCENTILES_HISTOGRAM_MESSAGES: "true"
  MANAGEMENT_METRICS_DISTRIBUTION_PERCENTILES_HISTOGRAM_HTTP: "true"
  MANAGEMENT_TRACING_SAMPLING_PROBABILITY: "0.1"
  MANAGEMENT_OTLP_TRACING_ENDPOINT: "http://jaeger:4318/v1/traces"
  
  # Logging
  LOGGING_LEVEL_COM_CHAT4ALL: "INFO"
  LOGGING_PATTERN_CONSOLE: "%d{ISO8601} [%thread] %-5level %logger{36} - %msg%n"
